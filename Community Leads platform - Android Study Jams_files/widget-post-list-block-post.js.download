(window.webpackJsonp=window.webpackJsonp||[]).push([["widget-post-list-block-post"],{3322:function(e,t,n){var a=n(1181),i=n(1179),o=n(1182);e.exports=function(e){return a(e)||i(e)||o()}},3327:function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var g,f,b,O=n(0),h=n.n(O),E=n(75),v=n.n(E),y=n(14),L=n(15),N=n.n(L),S=n(3),k=n.n(S),T=n(9),j=n.n(T),x=n(1),I=n(169),C=n(11),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customTriggerElem,n=e.delay,a=void 0===n?0:n,i=e.onEnterCallback,o=e.onLeaveCallback,r=Object(O.useState)(),c=j()(r,2),l=c[0],s=c[1],u=Object(O.useState)(!1),m=j()(u,2),d=m[0],p=m[1],g=t||l,f=Object(O.useCallback)((function(){setTimeout((function(){p(!0),i&&i()}),a)}),[a,i]),b=Object(O.useCallback)((function(){setTimeout((function(){p(!1),o&&o()}),a)}),[a,o]);return Object(O.useEffect)((function(){(null==g?void 0:g.disabled)&&(b(),g.removeEventListener("mouseenter",f),g.removeEventListener("mouseleave",b))}),[g,b,f]),Object(O.useEffect)((function(){if(g)return g.addEventListener("mouseenter",f),g.addEventListener("mouseleave",b),function(){g.removeEventListener("mouseenter",f),g.removeEventListener("mouseleave",b)}}),[b,f,g]),{isHovered:d,setTriggerElem:s}},w=n(742),_=n(16),A=n.n(_),P=n(18),M=n.n(P),D=n(12),B=n(190),z=n(539),F=n(33),U=n.n(F),G=n(6),H=n.n(G),K=n(10),V=n.n(K),W=n(7),Y=n.n(W),q=n(42),Q=n(45),X=n(58),J=n(97),Z=n(534),$=n(935);!function(e){e.user="user",e.content="content"}(g||(g={})),function(e){e.community="community",e.content="content"}(f||(f={})),function(e){e.initial="initial",e.idle="idle",e.loading="loading",e.changing="changing",e.error="error"}(b||(b={}));var ee,te,ne=new Q.c({path:"social/subscription"}),ae=function(e){var t,n=e.resourceType,a=e.resourceId,i=e.cacheFirst,o=(t={},k()(t,n===g.user?"followingUserKey":"followingContentKey",a),k()(t,"status","LIVE"),t);return i?ne.getCacheFirst("/get",X.a.MEMORY,J.a.HIGH,{params:o}):ne.get("/get",{params:o})},ie=function(e){var t=e.resourceType,n=e.resourceId,a=e.notify,i=void 0!==a&&a;return t===g.user?Object(Z.c)(n,{notify:i}):Object($.a)(n,{notify:i})},oe=function(e){var t=e.resourceType,n=e.resourceId;return t===g.user?Object(Z.f)(n):Object($.d)(n)},re={status:b.initial,isSubscribed:!1},ce=Object(q.a)({domain:"useSubscriptions",initialState:re,reducers:{fetchSubscription:function(e){Y()(e,"status",b.loading)},toggleSubcription:function(e){Y()(e,"status",b.changing)},setSubscriptionStatus:function(e,t){Y()(e,"status",b.idle),Y()(e,"isSubscribed",t.payload)},fetchSubscriptionFailure:function(e){Y()(e,"status",b.error)}}}),le=ce.actions,se=ce.reducer,ue=function(e){var t=e.resourceType,n=void 0===t?g.content:t,i=e.resourceId,o=e.autoFetch,r=e.isSubscribed,c=void 0!==r&&r,l=Object(O.useReducer)(se,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},re,{isSubscribed:c})),s=j()(l,2),u=s[0],m=s[1],d=Object(O.useCallback)(V()(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=11;break}return e.prev=1,m(le.fetchSubscription()),e.next=5,ae({resourceType:n,resourceId:i,cacheFirst:!0});case 5:m(le.setSubscriptionStatus(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),404===(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.status)?m(le.setSubscriptionStatus(!1)):m(le.fetchSubscriptionFailure());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[m,n,i]),p=Object(O.useCallback)(V()(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.status===b.changing){e.next=17;break}if(m(le.toggleSubcription()),e.prev=2,!u.isSubscribed){e.next=9;break}return e.next=6,oe({resourceId:i,resourceType:n});case 6:m(le.setSubscriptionStatus(!1)),e.next=12;break;case 9:return e.next=11,ie({resourceId:i,resourceType:n});case 11:m(le.setSubscriptionStatus(!0));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(le.setSubscriptionStatus(u.isSubscribed));case 17:case"end":return e.stop()}}),e,null,[[2,14]])}))),[i,n,u.isSubscribed,u.status]);return Object(O.useEffect)((function(){u.status===b.initial&&o&&i&&d()}),[u.status,d,o,i]),{status:u.status,isSubscribed:u.isSubscribed,toggleSubscription:p,fetchResourceSubscription:d}},me=n(263),de=function(e){var t=e.isSelected,n=M()(e,["isSelected"]),a=Object(y.c)(),i=a.translateKey,o=R(),r=o.isHovered,c=o.setTriggerElem,l=i(t?r?"GLOBAL.UNFOLLOW":"GLOBAL.FOLLOWED":"GLOBAL.FOLLOW");return h.a.createElement(x.Tooltip,{label:i(t?"FRONT.UNFOLLOW_HELP_TEXT":"FRONT.FOLLOW_HELP_TEXT")},h.a.createElement(x.Button,A()({"aria-label":i(t?"GLOBAL.UNFOLLOW":"GLOBAL.FOLLOW"),ref:c,emphasis:x.Emphasis.medium,isSelected:t,leftIcon:t&&(r?C.L:C.A)||void 0},n),l))},pe=function(e){return h.a.createElement(x.SkeletonRectangle,A()({},e,{variant:x.SkeletonRectangleVariant.rounded,height:x.Size.s,width:x.Size.l,style:{margin:"0",borderRadius:"2px"}}))},ge=function(e){var t=e.status,n=e.isSubscribed,a=e.className,i=M()(e,["status","isSubscribed","className"]);switch(t){case b.loading:return h.a.createElement(pe,{className:a});case b.idle:case b.changing:return h.a.createElement(de,A()({className:a,isSelected:n,disabled:t===b.changing,size:x.Size.s},i));case b.error:case b.initial:default:return null}},fe=n(80),be=n(202),Oe=function(){return h.a.createElement(x.SkeletonRectangle,{variant:x.SkeletonRectangleVariant.rounded,height:x.Size.m,width:x.Size.xxl,style:{height:"16px",width:"90px",margin:"0"}})},he=function(e){var t=e.userId,n=Object(y.c)(),a=n.translateKey,i=Object(fe.l)(),o=i.getUrl;return h.a.createElement(x.Button,{href:o(Object(be.f)({userId:t})),emphasis:x.Emphasis.low,color:"primary",size:x.Size.s},a("FRONT.USER.PROFILE.MORE_INFO.LINK"))},Ee=function(e){var t=e.userLoading,n=e.showFollow,a=e.useSubscriptionStatus,i=e.isSubscribed,o=e.toggleSubscription,r=e.userId;return h.a.createElement(h.a.Fragment,null,h.a.createElement(x.FlexBox,{vAlign:x.Alignment.center,hAlign:x.Alignment.center,orientation:x.Orientation.vertical},r?h.a.createElement(he,{userId:r}):t&&h.a.createElement(Oe,null),n&&h.a.createElement(ge,{className:"lumx-spacing-margin-top",status:a,isSubscribed:i,onClick:o})))},ve=n(1122),ye=n(69),Le=function(e){var t=e.user,n=e.anchorRef,a=e.isDetailsOpen,i=e.profilePicture,o=e.showEmail,r=void 0===o||o,c=e.showFollow,l=void 0!==c&&c,s=e.isLoading,u=void 0!==s&&s,m=e.onMouseEnter,d=e.className,p=void 0===d?"user-card-popover":d,f=e.onClose,E=e.placement,v=ue({resourceType:g.user,resourceId:null==t?void 0:t.id,autoFetch:!1}),y=v.status,L=v.isSubscribed,N=v.toggleSubscription,S=v.fetchResourceSubscription;h.a.useEffect((function(){a&&l&&y===b.initial&&S()}),[l,a,y,S]);var k=Object(O.useMemo)((function(){var e,n,a,i,o,c,l=[];(t.email&&r&&l.push(t.email),null===(e=t.apiProfile)||void 0===e||null===(n=e.organizations)||void 0===n?void 0:n[0].title)&&l.push(null===(o=t.apiProfile)||void 0===o?void 0:o.organizations[0].title);(null===(a=t.apiProfile)||void 0===a||null===(i=a.organizations)||void 0===i?void 0:i[0].department)&&l.push(null===(c=t.apiProfile)||void 0===c?void 0:c.organizations[0].department);return l}),[t,r]),T=i||Object(me.b)(t);return h.a.createElement(x.Popover,{anchorRef:n,isOpen:a,onClose:f,offset:{away:8},placement:E},h.a.createElement("div",{onMouseLeave:function(){f&&f()},onMouseEnter:m},t&&h.a.createElement(x.UserBlock,{name:t.fullName,fields:u?void 0:k,className:p,simpleAction:h.a.createElement(h.a.Fragment,null,u&&h.a.createElement("div",{className:"lumx-spacing-margin-bottom-big"},h.a.createElement(x.SkeletonTypography,{typography:x.Typography.overline,style:{width:"90px",margin:"-10px auto 4px auto"}}),h.a.createElement(x.SkeletonTypography,{typography:x.Typography.overline,style:{width:"110px",margin:"0 auto"}})),h.a.createElement(Ee,{userLoading:u,showFollow:l,isSubscribed:L,toggleSubscription:N,useSubscriptionStatus:y,userId:t.id})),size:x.Size.l,orientation:x.Orientation.vertical,avatarProps:T?{image:T,alt:t.fullName}:void 0})))},Ne=n(204),Se=n(374),ke=n(1010),Te=n(30),je=n(268),xe=n(35),Ie=Object(xe.g)(),Ce=function(e){var t=e.userId,n=e.fullName,a=e.email,i=e.picture,o=void 0===i?Ne.a:i,r=e.isLegacyContext,c=void 0===r?Ie.isLegacyContext:r,l=function(e){var t=e.name,n=e.email,a=e.id,i=e.delay,o=void 0===i?500:i,r=h.a.useState(!1),c=j()(r,2),l=c[0],s=c[1],u=h.a.useState(!1),m=j()(u,2),d=m[0],p=m[1],g=h.a.useState(!1),f=j()(g,2),b=f[0],E=f[1],v=Boolean(n)||Boolean(a),y=h.a.useState({accountType:ye.b.GOOGLE,fullName:t||"",id:a||"",email:n||"",lastName:"",firstName:""}),L=j()(y,2),N=L[0],S=L[1],k=h.a.useCallback((function(){E(!0),Object(ve.b)({email:n,uid:a,cacheFirst:!0}).then((function(e){S(e.data)})).finally((function(){E(!1)}))}),[n,a]),T=function(){s(!0)},x=function(){s(!1)};return Object(O.useEffect)((function(){var e=setTimeout((function(){v&&p(l)}),o);return function(){return clearTimeout(e)}}),[l,v,o]),Object(O.useEffect)((function(){d&&k()}),[k,d]),{onMouseLeave:x,onMouseEnter:T,onUserCardMouseLeave:x,onUserCardMouseEnter:T,isLoadingUser:b,userProfile:N,showUserCard:d}}({id:t,name:n,email:a}),s=l.onMouseEnter,u=l.onMouseLeave,m=l.onUserCardMouseEnter,d=l.onUserCardMouseLeave,p=l.userProfile,g=l.isLoadingUser,f=l.showUserCard,b=Object(fe.l)(),E=b.redirect,v=h.a.useRef(null),y=h.a.useCallback((function(){c?Se.a.redirectToProfile({id:t}):E(Object(be.f)({userId:t}))}),[c,E,t]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(ke.a,{ref:v,name:n,size:Te.h.m,avatarProps:{image:o,alt:n||""},fields:[a],onMouseEnter:s,onMouseLeave:u,onClick:y}),h.a.createElement(Le,{showEmail:!0,showFollow:!0,user:p,isDetailsOpen:f,anchorRef:v,profilePicture:o,onClose:d,isLoading:g,onMouseEnter:m,placement:je.a.BOTTOM_START}))},Re=n(151),we=function(e){var t=e.isOpen,n=e.isLoading,a=e.users,i=void 0===a?[]:a,o=e.title,r=e.lang,c=e.onClose,l=e.onContentInfiniteScroll,s=Object(O.useRef)(null);return Object(z.a)(s,l||U.a),h.a.createElement(x.Dialog,{size:x.Size.regular,onClose:c,header:h.a.createElement(x.Toolbar,{label:h.a.createElement("span",{className:"lumx-typography-title"},o),after:h.a.createElement(x.IconButton,{emphasis:x.Emphasis.low,icon:C.L,onClick:c,label:""})}),isOpen:t,isLoading:n,contentRef:s},h.a.createElement(x.List,{className:"lumx-spacing-margin-horizontal-huge lumx-spacing-margin-bottom"},i.map((function(e,t){return h.a.createElement(O.Fragment,{key:e.id},0!==t&&h.a.createElement(x.ListDivider,null),h.a.createElement(x.ListItem,{size:x.Size.regular},h.a.createElement(Ce,{userId:e.id,fullName:Object(Re.a)(e,r),email:e.email,picture:Object(me.b)(e)})))}))))},_e=n(1106),Ae=n(65),Pe={fetchUsers:_e.a},Me=Object(D.connect)((function(e){var t=Object(Ae.r)(e),n=t.cursor,a=t.isLoading,i=t.hasMore,o=Object(B.a)(e);return{users:Object(Ae.q)(e),cursor:n,isLoading:a,hasMore:i,lang:o}}),Pe)((function(e){var t=e.fetchUsers,n=e.isOpen,a=e.requestParams,o=e.cursor,r=e.hasMore,c=M()(e,["fetchUsers","isOpen","requestParams","cursor","hasMore"]);return Object(O.useEffect)((function(){n&&t(a)}),[t,n,a]),h.a.createElement(we,A()({isOpen:n,onContentInfiniteScroll:function(){r&&t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{add:!0,cursor:o}))}},c))})),De=n(1129);!function(e){e.grouped="GROUPED",e.ungrouped="UNGROUPED"}(ee||(ee={})),function(e){e.cover="COVER",e.side="SIDE"}(te||(te={}));var Be,ze,Fe,Ue,Ge,He;!function(e){e.vertical="VERTICAL",e.horizontal="HORIZONTAL"}(Be||(Be={})),function(e){e.under="UNDER",e.inner="INNER"}(ze||(ze={})),function(e){e.regular="REGULAR",e.pictureOnly="PICTURE_ONLY"}(Fe||(Fe={})),function(e){e.post="post"}(Ue||(Ue={})),function(e){e.vertical="VERTICAL",e.horizontal="HORIZONTAL"}(Ge||(Ge={})),function(e){e.default="DEFAULT",e.comment="COMMENT"}(He||(He={}));var Ke="block-reactions",Ve=function(e){var t,n,a=e.likes,i=void 0===a?0:a,o=e.isLiked,r=e.comments,c=void 0===r?0:r,l=e.onLike,s=e.onComment,u=e.onReply,m=e.commentUrl,d=e.isLikeLoading,p=e.likesList,g=e.onLikeListOpen,f=e.resourceId,b=e.resourceType,E=e.theme,v=void 0===E?x.Theme.light:E,L=e.share,S=e.disabled,T=e.displayOptions,_=void 0===T?{}:T,A=e.canShare,P=Object(y.c)(),M=P.translateKey,D=P.translateAndReplace,B=Object(O.useState)(),z=j()(B,2),F=z[0],U=z[1],G=Object(O.useState)(),H=j()(G,2),K=H[0],V=H[1],W=Object(w.a)(!1),Y=j()(W,4),q=Y[0],Q=Y[2],X=Y[3],J=Object(O.useCallback)((function(){var e;i>0&&(!(null==p?void 0:p.isLoaded)||i!==(null==p||null===(e=p.items)||void 0===e?void 0:e.length))&&g&&g()}),[i,p,g]),Z=R({customTriggerElem:F,delay:200,onEnterCallback:J}),$=Z.isHovered,ee=R({customTriggerElem:K}),te=ee.isHovered,ne=($||te)&&i>0,ae=h.a.useMemo((function(){return{maxResults:10,reactedEntityKey:f,reactedEntityKind:b,status:"ENABLED",fields:"items(firstName,lastName,uid,id),more,callId,cursor",showHidden:!1}}),[f,b]),ie=_.variant,oe=void 0===ie?He.default:ie,re=_.buttonSize,ce=_.buttonColor,le=void 0===ce?v===x.Theme.dark?x.ColorPalette.light:x.ColorPalette.dark:ce,se=_.buttonClassName,ue=_.buttonEmphasis,me=void 0===ue?x.Emphasis.low:ue,de=_.showButtonLabels,pe=void 0!==de&&de;return h.a.createElement("div",{className:"".concat(Ke," ").concat(Ke,"--theme-").concat(v)},h.a.createElement(x.Button,{ref:U,className:N()("".concat(Ke,"__like-btn"),(t={},k()(t,"".concat(Ke,"__like-btn--liked"),o),k()(t,"".concat(Ke,"__like-btn--disabled"),d||S),t),se),leftIcon:C.Fb,hasBackground:!1,onClick:l,disabled:d||S,theme:v,"aria-label":D("FRONT.CONTENTS.LIKE_BUTTON.ARIA",{NB:i}),"aria-pressed":o,size:re,color:le,emphasis:me},i.toString()," ",pe&&M(i<=1?"LIKE_BUTTON_LABEL":"LIKE_BUTTON_LABEL_PLURAL")),oe===He.default&&h.a.createElement(x.Button,{className:N()("".concat(Ke,"__comment-btn"),se),leftIcon:C.N,hasBackground:!1,onClick:s,href:m,theme:v,"aria-label":D("FRONT.CONTENTS.COMMENT_BUTTON.ARIA",{NB:c||0}),size:re,color:le,emphasis:me,disabled:S},c.toString(),pe&&M(c<=1?"COMMENT_BUTTON_LABEL":"COMMENT_BUTTON_LABEL_PLURAL")),u&&oe===He.comment&&h.a.createElement(x.Button,{className:N()("".concat(Ke,"__reply-btn"),se),leftIcon:C.Cc,hasBackground:!1,onClick:u,href:m,theme:v,size:re,color:le,emphasis:me,disabled:S},M("GLOBAL.REPLY")),(null==L?void 0:L.type)===Ue.post&&h.a.createElement(I.a,null,h.a.createElement(De.a,{canShareToCommunity:A,isExtended:pe,preview:L.preview,color:v===x.Theme.dark?x.ColorPalette.light:x.ColorPalette.dark,disabled:S,size:re})),h.a.createElement(x.Dropdown,{shouldFocusOnOpen:!0,anchorRef:{current:F},isOpen:ne},h.a.createElement("div",{ref:V},h.a.createElement(x.List,{itemPadding:(null==p?void 0:p.isLoaded)?void 0:x.Size.huge},!(null==p?void 0:p.isLoaded)&&h.a.createElement(x.ListItem,null,h.a.createElement(x.Progress,{variant:x.ProgressVariant.circular})),(null==p?void 0:p.isLoaded)&&(null==p||null===(n=p.items)||void 0===n?void 0:n.map((function(e){return h.a.createElement(x.ListItem,{className:"lumx-",size:x.Size.tiny,key:e.fullName},e.fullName)}))),(null==p?void 0:p.isLoaded)&&h.a.createElement(x.ListItem,{className:"".concat(Ke,"__see-all-btn"),size:x.Size.tiny,onItemSelected:X},M("GLOBAL.SEE_ALL"))))),h.a.createElement(I.a,null,h.a.createElement(Me,{isOpen:q,title:"".concat(i," ").concat(M("USER_LIST_LIKES")),onClose:Q,requestParams:ae})))};Ve.displayName="BlockReactions";var We=n(1118),Ye=n(326),qe=n(931),Qe=n(789),Xe=n(78),Je="post-image-attachments",Ze=function(e){var t,n=e.theme,a=e.images,i=e.onMediaClick,o=e.className;return h.a.createElement("div",{className:N()(o,Je,k()({},"".concat(Je,"--single-image"),1===a.length))},1===a.length&&h.a.createElement("div",{className:"".concat(Je,"__image")},h.a.createElement(x.Thumbnail,{alt:a[0].description||a[0].title||a[0].fileName||"",image:(null===(t=a[0].thumbnail)||void 0===t?void 0:t.url)||a[0].url||"",aspectRatio:x.AspectRatio.original,align:x.Alignment.center,onClick:function(){return i(0)}})),a.length>1&&h.a.createElement(x.Mosaic,{theme:n,thumbnails:a.map((function(e){var t,n,a;return{focusPoint:(null===(t=e.thumbnail)||void 0===t?void 0:t.focalX)&&e.thumbnail.focalY?{x:null===(n=e.thumbnail)||void 0===n?void 0:n.focalX,y:e.thumbnail.focalY}:void 0,image:(null===(a=e.thumbnail)||void 0===a?void 0:a.url)||e.url||"",alt:e.description||e.title||e.fileName||""}})),onImageClick:i}))},$e=(n(82),n(40),new Q.c({apiVersion:"v2"}),n(21)),et=n.n($e),tt=n(103),nt=n(28),at=n.n(nt),it=n(86),ot=n.n(it),rt=n(4),ct=n.n(rt),lt=Object(q.a)({domain:"widget",initialState:{entities:{}},reducers:{setWidgets:function(e,t){var n=t.payload;Object.assign(e.entities,ot()(at()(n,(function(e){return r({},e,{state:"loaded"})})),"widgetId"))},setWidget:function(e,t){var n=t.payload;e.entities[n.widgetId]=r({},n,{state:"loaded"})},setWidgetProperties:function(e,t){e.entities[t.payload.widgetId]=Object(tt.a)(e.entities[t.payload.widgetId],t.payload.widgetProperties)},setBlockProperties:function(e,t){var n=ct()(e.entities[t.payload.widgetId],t.payload.path);Object.assign(n,t.payload.properties)},addBlockItems:function(e,t){var n=e.entities[t.payload.widgetId].body,a=n.items,i=[].concat(et()(a),et()(t.payload.nextItems));Y()(e.entities[t.payload.widgetId].body,"items",i)}}}),st=(lt.actions,lt.reducer,function(){var e=V()(H.a.mark((function e(t,n){var a,i,o;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.open("","_blank"),e.prev=1,e.next=4,Object(Xe.g)({docPath:"provider=haussmann_media/drive=".concat(t,"/resource=").concat(n)});case 4:i=e.sent,o=i.data,a&&o&&o.content&&o.content[0]&&a.open(o.content[0].servingUrl,"_self"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a&&a.close();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ut="".concat("","FileAttachmentMultiple"),mt="lumx-file-attachment-multiple",dt={theme:x.Theme.light},pt=function(e){var t=e.community,n=e.files,a=e.className,i=e.theme,o=void 0===i?dt.theme:i,r=M()(e,["community","files","className","theme"]),c=function(e){return function(){t&&e.source===Xe.a.HAUSSMANN_MEDIA?st(t,e.uuid):window.open(e.url,"_blank")}};return h.a.createElement(x.List,A()({className:N()(a,mt,"".concat(mt,"--theme-").concat(o))},r),n.map((function(e,t){var a=e.thumbnail,i=e.icon,r=void 0===i?{icon:C.hb,color:x.ColorPalette.dark}:i,l=e.name,s=e.mimeType,u=s&&!["image/gif","image/svg+xml"].includes(s),m=null==a?void 0:a.image,d=m&&-1!==m.indexOf("https://storage.googleapis.com"),p=d?Object(Xe.l)(m,512):Object(Xe.m)(m,512),g=u?p:m;return h.a.createElement(O.Fragment,{key:e.uuid},h.a.createElement(x.ListItem,{className:"".concat(mt,"__file"),before:h.a.createElement(x.Thumbnail,A()({alt:l||"",role:"link",variant:x.ThumbnailVariant.rounded,onClick:c(e),tabIndex:0},a,{image:g,size:x.Size.m,aspectRatio:x.AspectRatio.square,fallback:h.a.createElement(x.Icon,A()({icon:""},r,{theme:o,className:N()("".concat(mt,"__file-icon"),r.className),size:x.Size.m}))}))},h.a.createElement(x.Button,{emphasis:x.Emphasis.low,onClick:c(e),className:"".concat(mt,"__link")},l)),t<n.length-1&&h.a.createElement(x.ListDivider,{className:"".concat(mt,"__divider")}))})))};pt.displayName=ut;var gt="block-post-attachments",ft=function(e){var t=e.community,n=e.className,a=e.images,i=e.link,o=e.files,r=e.theme,c=e.isLoading,l=e.onClearAttachments,s=Object(y.c)(),u=s.translateKey,m=a&&a.length||i||o&&o.length,d=h.a.useState(),p=j()(d,2),g=p[0],f=p[1],b=Object(O.useRef)(null),E=i&&i.videoId?i.videoId:Object(Xe.i)(null==i?void 0:i.url,Object(Xe.j)(null==i?void 0:i.url));return h.a.createElement("div",{className:N()("".concat(gt,"__wrapper"),n)},a&&a.length>0&&h.a.createElement(x.Lightbox,{theme:x.Theme.dark,isOpen:void 0!==g,parentElement:b,onClose:function(){return f(void 0)},closeButtonProps:{label:u("GLOBAL.CLOSE")}},h.a.createElement(x.Slideshow,{theme:x.Theme.dark,activeIndex:g,slideshowControlsProps:{nextButtonProps:{label:u("GLOBAL.NEXT")},previousButtonProps:{label:u("GLOBAL.PREVIOUS")}},fillHeight:!0},a.map((function(e){return e.url&&h.a.createElement(x.SlideshowItem,{key:e.mediaId},h.a.createElement(x.ImageBlock,{image:e.url,align:x.Alignment.center,fillHeight:!0,alt:""}))})))),h.a.createElement(x.FlexBox,{theme:r,className:"".concat(gt,"__types"),orientation:x.Orientation.vertical},Boolean(m)&&!c&&h.a.createElement(h.a.Fragment,null,a&&a.length>0&&h.a.createElement(Ze,{images:a,onMediaClick:f,theme:r,className:N()("".concat(gt,"__type"),"".concat(gt,"__type--images"))}),o&&o.length>0&&h.a.createElement(x.FlexBox,{theme:r,className:N()("".concat(gt,"__type"),"".concat(gt,"__type--files"))},h.a.createElement(pt,{theme:r,community:null==t?void 0:t.uid,files:o.map((function(e){var t,n=null===(t=e.thumbnail)||void 0===t?void 0:t.url,a=!n;return{mimeType:e.mimeType||"",url:e.url||"",name:e.fileName,thumbnail:a?{}:{image:n},icon:Object(Xe.h)({mimeType:e.mimeType}),uuid:e.mediaId,source:e.source}}))})),i&&!E&&h.a.createElement(x.FlexBox,{theme:r,className:N()("".concat(gt,"__type"),"".concat(gt,"__type--link"))},h.a.createElement(x.LinkPreview,{theme:r,title:i.title,description:i.description,link:i.url||"",thumbnailProps:i.image?{image:i.image,alt:i.description}:void 0})),i&&E&&h.a.createElement(x.FlexBox,{theme:r,className:"".concat(gt,"__video-wrapper")},h.a.createElement("iframe",{className:"".concat(gt,"__video-iframe"),title:i.title,src:Object(Xe.c)(i.url||""),frameBorder:"0",allowFullScreen:!0})),l&&h.a.createElement(x.FlexBox,{theme:r,orientation:x.Orientation.horizontal},h.a.createElement(x.Button,{className:"lumx-flex-box--margin-auto-left lumx-spacing-margin-vertical-regular",theme:r,size:x.Size.s,emphasis:x.Emphasis.medium,onClick:l,leftIcon:C.L},u("FRONT.ATTACHMENTS.DELETE_ALL")))),c&&h.a.createElement(x.FlexBox,{theme:r,className:"".concat(gt,"__loader-wrapper"),vAlign:x.Alignment.center,hAlign:x.Alignment.center},h.a.createElement(x.Progress,{theme:r}))),h.a.createElement("div",{className:"".concat(gt,"__crawler-loader")}))},bt=n(550),Ot=n(68),ht="comment-body",Et=function(e){var t=e.onTranslate,n=e.goBackToOriginal,a=e.status,i=e.targetLang,o=e.theme,r=Object(y.c)(),c=r.translateKey,l=r.translateAndReplace;return h.a.createElement(h.a.Fragment,null,"ORIGINAL"===a&&h.a.createElement("button",{type:"button",className:N()("".concat(ht,"__translate-btn"),"lumx-link","lumx-link--theme-".concat(o),"lumx-spacing-margin-top-regular","lumx-button","lumx-button--has-left-icon","lumx-typography-caption",{"lumx-link--color-light":o===x.Theme.dark,"lumx-link--color-secondary":o===x.Theme.light}),onClick:t},h.a.createElement(x.Icon,{icon:C.Qc,size:x.Size.xxs,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",null,l("FRONT.AUTO_TRANSLATION.TRANSLATE_ACTION",{lang:c("LANG_".concat(i.toUpperCase()))},i))),"TRANSLATED"===a&&h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,className:"lumx-spacing-margin-top-regular lumx-typography-caption",wrap:!0},h.a.createElement(x.Icon,{icon:C.Qc,size:x.Size.xxs,color:x.ColorPalette.dark,colorVariant:x.ColorVariant.L2,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-color-font-black-L2"},l("FRONT.AUTO_TRANSLATION.TRANSLATION_SUCCESS",{lang:c("LANG_".concat(i.toUpperCase()))},i),","),h.a.createElement("button",{type:"button",className:N()("".concat(ht,"__translate-btn"),"lumx-link","lumx-link--theme-".concat(o),"lumx-button","lumx-spacing-margin-left-tiny",{"lumx-link--color-light":o===x.Theme.dark,"lumx-link--color-secondary":o===x.Theme.light}),onClick:n},h.a.createElement("span",null,c("FRONT.AUTO_TRANSLATION.SEE_ORIGINAL").toLowerCase()))),"LOADING"===a&&h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,className:"lumx-spacing-margin-top-regular lumx-typography-caption"},h.a.createElement(x.Progress,{className:"lumx-progress--small lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-color-font-black-L3"},l("FRONT.AUTO_TRANSLATION.TRANSLATION_LOADING",{lang:c("LANG_".concat(i.toUpperCase()))},i))))},vt="comment-body",yt=function(e){var t,n=e.theme,a=void 0===n?x.Theme.light:n,i=e.mentionsDetails,o=e.content,r=e.parent,c=e.uid,s=e.text,u=e.translatedText,m=e.images,d=void 0===m?[]:m,p=e.files,g=void 0===p?[]:p,f=e.links,b=void 0===f?[]:f,E=e.onTranslate,v=e.locale,L=e.community,S=Object(D.useSelector)(Object(Ot.a)("translation")),T=Object(y.c)(),I=T.translateObject,R=T.translateKey,w=h.a.useRef(null),_=h.a.useState(!1),A=j()(_,2),P=A[0],M=A[1],B=P&&void 0===u,z=Object(O.useMemo)((function(){return B?"LOADING":P?"TRANSLATED":"ORIGINAL"}),[B,P]),F=h.a.useMemo((function(){return Object(Ye.a)(I(s)||"")}),[s,I]),U=Boolean(d&&d.length),G=Boolean(g&&g.length),H=Boolean(b&&b.length),K=U||G||H,V=function(e){var t=h.a.useState(!0),n=j()(t,2),a=n[0],i=n[1],o=h.a.useState(!0),r=j()(o,2),c=r[0],l=r[1];return h.a.useEffect((function(){e.current&&e.current.clientHeight>100?i(!1):(i(!0),l(!1))}),[e]),{isDetailsOpen:a,hasDetails:c,toggleDetails:function(){i((function(e){return!e}))}}}(w),W=V.hasDetails,Y=V.isDetailsOpen,q=V.toggleDetails;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{ref:w,className:N()("".concat(vt,"__content"),k()({},"".concat(vt,"__content--preview"),!Y)),style:{maxHeight:Y?void 0:100}},"TRANSLATED"!==z&&h.a.createElement(Qe.a,{theme:a,content:F,elements:bt.a,marks:bt.b,post:i?{mentionsDetails:i}:{}}),"TRANSLATED"===z&&h.a.createElement("div",{className:N()({"lumx-color-font-white-N":a===x.Theme.dark}),dangerouslySetInnerHTML:{__html:u}})),W&&h.a.createElement("div",{className:N()("".concat(vt,"__see-more-btn-wrapper"),k()({},"".concat(vt,"__see-more-btn-wrapper--preview"),!Y))},h.a.createElement("button",{type:"button",className:N()("lumx-link","lumx-link--theme-".concat(a),"".concat(vt,"__see-more-btn"),{"lumx-link--color-light":a===x.Theme.dark,"lumx-link--color-secondary":a===x.Theme.light}),onClick:function(e){e.stopPropagation(),q()}},h.a.createElement(x.Icon,{size:x.Size.xs,icon:Y?C.G:C.D}),h.a.createElement("span",null," ".concat(R(Y?"GLOBAL.SEE_LESS":"GLOBAL.SEE_MORE"))))),E&&S&&h.a.createElement(Et,{onTranslate:function(){var e;(M(!0),W&&!Y&&q(),void 0===u)&&E({toTranslate:(null===(e=w.current)||void 0===e?void 0:e.innerHTML)||"",contentId:o,parentId:r,uid:c})},goBackToOriginal:function(){M(!1)},status:z,targetLang:v,theme:a}),K&&h.a.createElement(ft,{theme:a,images:d.map((function(e){var t=Object(Xe.f)(e,I,v),n=Object(Xe.d)(t);return{id:t.fileId,mediaId:t.fileId,url:n||"",thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:I(e.thumbnail)}:void 0}})),files:g.map((function(e){var t=Object(Xe.f)(e,I,v),n=Object(Xe.d)(t);return{mediaId:e.uid,title:t.name||"",fileName:t.name||"",url:n||"",mimeType:t.mimeType||"",source:e.source,thumbnail:e.thumbnail?{type:"BlockImage",url:I(e.thumbnail)}:void 0}})),link:(null==b?void 0:b[0])?l({},b[0],{image:null===(t=b[0].images)||void 0===t?void 0:t[b[0].thumbnailIndex||0]}):void 0,community:L}))},Lt=n(120),Nt=n(636),St=n(32),kt=n(797),Tt="comment-action",jt=Object(D.connect)(null,(function(e,t){return{onMarkAsRelevant:function(){e(Object(Nt.h)(t.comment,t.updateLegacyParentContent))},onEdit:function(){t.onEdit(),e(Lt.a.initEditor(t.comment))},onHide:function(n){e(Object(Nt.f)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.comment,{status:t.status===qe.a.hide?qe.a.live:qe.a.hide}),n))}}}))((function(e){var t=e.comment,n=e.canHide,a=e.canEdit,i=e.canMarkRelevant,o=e.canReport,r=e.status,c=e.markedAsRelevant,l=e.className,s=e.updateLegacyParentContent,u=e.onEdit,m=e.onMarkAsRelevant,d=e.onHide,p=e.onReport,g=Object(y.c)(),f=g.translateKey,b=h.a.useState(!1),E=j()(b,2),v=E[0],L=E[1],S=h.a.useState(!1),T=j()(S,2),I=T[0],R=T[1],w=Object(O.useRef)(null),_=Object(O.useRef)(Object(St.a)()),A=function(){return L(!v)},P=Object(O.useCallback)((function(){return R(!1)}),[]),M=Object(O.useCallback)((function(){d((function(){s&&s("COMMENT_HIDE"),P()}))}),[P,d,s]),D=r===qe.a.hide,B=n&&d,z=a&&u,F=o&&p,U=i&&m,G=Object(O.useCallback)((function(){D?d((function(){s&&s("COMMENT_ADD")})):R(!0)}),[D,d,s]);return z||B||U||F?h.a.createElement(h.a.Fragment,null,h.a.createElement(kt.a,{isOpen:I,title:f("FRONT.COMMENTS.HIDE.CONFIRM_DIALOG.TITLE"),onCancel:P,onConfirm:M,confirmButtonProps:{disabled:t.isSaveLoading},cancelButtonProps:{disabled:t.isSaveLoading},size:x.Size.tiny},f("FRONT.COMMENTS.HIDE.CONFIRM_DIALOG.DESCRIPTION")),h.a.createElement(x.IconButton,{className:N()(Tt,l,k()({},"".concat(Tt,"--hovered"),v)),id:"".concat(_.current,"-button"),ref:w,emphasis:x.Emphasis.low,icon:C.U,size:x.Size.s,onClick:A,"aria-haspopup":"true","aria-expanded":v,label:f("FRONT.WIDGET.WIDGET_COMMENTS.MENU.ARIA_LABEL")}),h.a.createElement(x.Dropdown,{className:"".concat(Tt,"__menu"),closeOnClick:!0,closeOnClickAway:!0,closeOnEscape:!0,anchorRef:w,isOpen:v,onClose:A,placement:"bottom-end"},h.a.createElement(x.List,{role:"menu","aria-labelledby":"".concat(_.current,"-button")},B&&(!c||c&&D)&&h.a.createElement(x.ListItem,{className:"".concat(Tt,"__menuitem ").concat(Tt,"__menuitem--hide"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:D?C.cb:C.db,size:x.Size.xs}),onItemSelected:G,role:"none",linkProps:{role:"menuitem"}},f(D?"SHOW":"HIDE")),z&&h.a.createElement(x.ListItem,{className:"".concat(Tt,"__menuitem ").concat(Tt,"__menuitem--edit"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:C.pc,size:x.Size.xs}),onItemSelected:u,role:"none",linkProps:{role:"menuitem"}},f("COMMENT_EDIT")),(z||B)&&(F||U)&&!D&&h.a.createElement(x.ListDivider,{role:"separator"}),U&&!D&&h.a.createElement(x.ListItem,{className:"".concat(Tt,"__menuitem ").concat(Tt,"__menuitem--mark-relevant"),size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:C.B,size:x.Size.xs}),onItemSelected:m,role:"none",linkProps:{role:"menuitem"}},f(c?"FRONT.COMMENTS.UNMARK_RELEVANT":"FRONT.COMMENTS.MARK_RELEVANT")),F&&h.a.createElement(x.ListItem,{size:x.Size.tiny,before:h.a.createElement(x.Icon,{icon:C.hc,size:x.Size.xs}),onItemSelected:p,role:"none",linkProps:{role:"menuitem"}},f("FRONT.COMMENTS.REPORT"))))):null})),xt=n(443),It=n(1123),Ct=n(83),Rt=n.n(Ct),wt=n(281),_t=n.n(wt),At=n(449),Pt=n(1120),Mt=n(417),Dt=n(81),Bt=n(1131),zt=n(37),Ft=n(350),Ut=n(485),Gt=n(669),Ht=n(1094),Kt=n(1095),Vt=n(1097),Wt=n(1099),Yt=n(1102),qt=n(792),Qt=n(1128),Xt=n(1105),Jt=[zt.Body,zt.Headline,zt.Title,zt.Subtitle,zt.Link,zt.Image,zt.UnorderedList,zt.OrderedList,zt.ListItem,zt.Table,zt.TableBody,zt.TableHead,zt.TH,zt.TR,zt.TD,zt.Preformatted,zt.Blockquote,zt.HR,zt.UserMention],Zt=[zt.Bold,zt.Italic,zt.Underline,zt.Strikethrough,zt.Code],$t=function(e){var t=e.theme,n=e.comment,a=e.value,i=e.onChange,o=e.mode,r=void 0===o?"edit":o,c=e.placeholder,l=Object(O.useState)(2),s=j()(l,2),u=s[0],m=s[1],d=Object(O.useCallback)((function(e){i(e.target.value)}),[i]),p=Object(O.useRef)(null);Object(O.useEffect)((function(){var e=p.current;if(e&&a){e.rows=2;var t=Math.ceil(e.scrollHeight/20)+1;e.rows=t,m(t)}}),[p,a]);var g=Object(O.useMemo)((function(){return"preview"===r&&Object(Ye.a)(a.trim(),Ut.a)}),[r,a]),f=Object(O.useCallback)((function(){p.current&&document.activeElement!==p.current&&p.current.focus()}),[]);return h.a.createElement(x.FlexBox,{orientation:x.Orientation.vertical,fillSpace:!0,onClick:f,className:"lumx-spacing-margin-top"},"edit"===r&&h.a.createElement("textarea",{ref:p,className:"wrex-textarea-editor comment-textarea-editor",rows:u,value:a,onChange:d,placeholder:c}),g&&h.a.createElement(Qe.a,{theme:t,content:g,elements:Jt,marks:Zt,post:n}))},en=n(1127),tn=function(e){var t=e.className,n=e.editableProps,a=e.editor,i=e.mentionsProps;i=void 0===i?{}:i;var o=i.mentionTarget,r=i.mentionTargetRef,c=i.search,l=Object(O.useRef)(null);if(o&&r)try{l.current=At.c.toDOMNode(a,a)}catch(e){l.current=void 0}return h.a.createElement(h.a.Fragment,null,h.a.createElement(At.a,A()({},n,{className:N()("wrex-editor",t)})),o&&r&&h.a.createElement(en.a,{inputRef:l,query:c,isOpen:!0,anchorRef:r,onUserSelect:function(e){a.insertMention(e,o)}}))};tn.displayName="CommentEditor";var nn=n(328),an=n(1121),on=function(e){var t,n,a,i=e.comment,o=e.isAttachmentsLoading,r=e.legacyFallbackEditor,c=e.onInsertLink,l=e.onQuickUpload,s=e.onOpenFilePicker;return h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center,wrap:!0},!r.active&&h.a.createElement(h.a.Fragment,null,h.a.createElement(nn.d,{className:"lumx-flex-box lumx-flex-box--orientation-horizontal",iconSize:x.Size.s}),h.a.createElement(x.Divider,{style:{width:1,height:20},className:"lumx-spacing-margin-horizontal-tiny"})),h.a.createElement(nn.b,{multiple:!1,openFilePicker:s,onQuickUpload:l,disabled:(!i.images||0===i.images.length)&&(!i.files||0===i.files.length)&&Boolean(null===(t=i.links)||void 0===t?void 0:t.length),size:x.Size.s}),h.a.createElement(an.a,{disabled:(!i.links||0===i.links.length)&&Boolean((null===(n=i.images)||void 0===n?void 0:n.length)||(null===(a=i.files)||void 0===a?void 0:a.length))||o,size:x.Size.s,onSubmit:c}),r.active&&h.a.createElement(x.IconButton,{emphasis:x.Emphasis.low,label:"",size:x.Size.s,onClick:r.toggleContentMode,icon:"edit"===r.contentMode?C.cb:C.pc}))},rn="block-comment-editor",cn=function(){return[{type:zt.Body.displayName,children:[{text:""}]}]},ln=Object(D.connect)((function(e,t){var n=Object(xt.e)(e)({content:t.contentId,parent:t.parentId,id:t.commentId}),a=Object(Ae.b)(e),i=Object(xt.d)(e),o=Object(It.a)(e),r=Object(xt.f)(e)({content:t.contentId});return{comment:n,currentUser:a,currentEditor:i,currentLanguage:o,isSaving:r}}),(function(e,t){var n=function(t,n){var a=t.every((function(e){var t;return(null===(t=e.content)||void 0===t?void 0:t[0].type)===Xe.b.IMAGE&&(e.from===Xe.a.LUMDRIVE||e.source===Xe.a.LUMDRIVE||e.source===Xe.a.HAUSSMANN_MEDIA)}))?Xe.b.IMAGE:Xe.b.DOCUMENT,i=a===Xe.b.DOCUMENT?t:[],o=a===Xe.b.IMAGE?t:[];e(Lt.a.setEditedComment({content:n.content,parent:n.parent,id:n.id,files:i,images:o}))};return{onSave:function(n){e(Object(Nt.f)(n,(function(){n.id?t.onEditionSave&&t.onEditionSave():t.updateLegacyParentContent&&t.updateLegacyParentContent("COMMENT_ADD")})))},onContentChange:function(t,n){e(Lt.a.setEditedComment({text:t,content:n.content,id:n.id}))},onAttachmentsChange:n,onClearAttachments:function(t){e(Lt.a.setEditedComment({files:[],images:[],links:[],content:t.content,parent:t.parent,id:t.id,text:t.text}))},onQuickUpload:function(t,a,i){e(Object(Nt.e)(t,a,i,(function(e){return n(e,t)})))},onInsertLink:function(t,n){n.content&&e(Object(Nt.a)(t,n))}}}))((function(e){var t,n=e.className,a=e.theme,i=void 0===a?x.Theme.light:a,o=e.community,r=e.currentUser,c=e.currentLanguage,l=e.currentEditor,s=e.comment,u=e.isSaving,d=e.isReply,p=e.onSave,g=e.onInsertLink,f=e.onQuickUpload,b=e.onAttachmentsChange,E=e.onClearAttachments,v=Object(O.useState)(window.location.hash.includes("comments")&&!(null==s?void 0:s.parent)||!!(null==s?void 0:s.parent)||!!(null==s?void 0:s.id)),L=j()(v,2),S=L[0],k=L[1],T=Object(y.c)(),I=T.translateKey,C=T.translateObject,R=h.a.useState((null==s?void 0:s.text)||cn()),w=j()(R,2),_=w[0],A=w[1],P=Object(Bt.a)((null==s?void 0:s.text)||cn()),D=Object(O.useMemo)((function(){return P.active?""===P.content:Rt()(_,cn())}),[P.active,P.content,_]),B=I(d?"FRONT.COMMENTS.REPLY.EDITOR.PLACEHOLDER":"FRONT.COMMENTS.COMMENT.EDITOR.PLACEHOLDER"),z=Object(O.useMemo)((function(){return function(e,t){var n=Object(Ht.a)({plugins:[At.g,At.f,Kt.withTypography,Vt.withLink,qt.withImage,Object(Wt.withList)(zt.Body.displayName),Object(Yt.withSnippet)({"-":function(e){return e.setListType(zt.UnorderedList.displayName)},"\\*":function(e){return e.setListType(zt.UnorderedList.displayName)},"\\d+\\.":function(e){return e.setListType(zt.OrderedList.displayName)}}),Mt.c,Object(Qt.a)({placeholder:e,defaultContent:t}),Object(Xt.a)(Ut.a)],extraKeyHandlers:[Object(Gt.a)([{match:_t()("mod+b"),handler:function(){return n.editor.toggleMark(zt.Bold.displayName)}},{match:_t()("mod+i"),handler:function(){return n.editor.toggleMark(zt.Italic.displayName)}}],{preventDefault:!0})],elements:Jt,marks:Zt});return n}(B,cn())}),[]),F=z.editor,U=M()(z,["editor"]);h.a.useEffect((function(){F&&s&&s.isEditorVisible&&!P.active&&S&&(Object(Dt.c)(F),k(!1))}),[s,F,P.active,S]);var G=null==s?void 0:s.text;h.a.useEffect((function(){(null==s?void 0:s.isEditorVisible)&&!P.active&&G&&(At.c.deselect(F),A(G),(!Rt()(G,cn())||l&&(null==s?void 0:s.parent)===l.parentId&&(null==s?void 0:s.content)===l.contentId)&&k(!0))}),[s,G,l,F,P.active]);var H=Object(O.useCallback)((function(){Object(Ft.a)([].concat(et()((null==s?void 0:s.files)||[]),et()((null==s?void 0:s.images)||[])),(function(e){s&&b([e],m({},s,{text:_}))}),{multi:!1,allowedProviders:[Xe.a.LUMDRIVE,Xe.a.GOOGLE_DRIVE,Xe.a.MICROSOFT,Xe.a.COMMUNITY],allowedFileTypes:["IMAGE","OTHER","FOLDER"]})}),[s,b,_]),K=h.a.useCallback((function(){if(s){var e=at()(Object(Mt.a)(F,F.children.length),"id");P.active?p(m({},s,{mentions:e,text:P.getSlateContent()})):(At.c.deselect(F),p(m({},s,{text:_,mentions:e})))}}),[s,F,P,p,_]),V=Object(Pt.a)(A,F),W=V.mentionTarget,Y=V.mentionTargetRef,q=V.search,Q=V.handleChange,X=Boolean(s&&s.images&&s.images.length),J=Boolean(s&&s.files&&s.files.length),Z=Boolean(s&&s.links&&s.links.length),$=X||J||Z,ee=Boolean(s&&s.isAttachmentsLoading),te=Object(O.useCallback)((function(e){u||D&&!$||!_t()("mod+Enter",e)||K()}),[u,D,$,K]);return s&&s.isEditorVisible?h.a.createElement(x.FlexBox,{className:N()(rn,"".concat(rn,"--theme-").concat(i),n,"lumx-comment-block","lumx-spacing-margin-bottom-big"),orientation:x.Orientation.horizontal},h.a.createElement(At.d,{editor:F,value:_,onChange:Q},h.a.createElement(x.FlexBox,{className:N()("".concat(rn,"__user-avatar"),"lumx-spacing-margin-right-big"),orientation:x.Orientation.vertical},h.a.createElement(x.Avatar,{image:Object(me.b)(r)||Ne.a,alt:Object(Re.a)(r,c)})),h.a.createElement(x.FlexBox,{orientation:x.Orientation.vertical,fillSpace:!0,style:{width:"calc(100% - 52px)"}},h.a.createElement("div",{onKeyDown:te,className:N()("".concat(rn,"__content-wrapper"),"lumx-color-background-dark-L6","lumx-spacing-padding-regular")},!P.active&&h.a.createElement(tn,{editableProps:U,editor:F,mentionsProps:{mentionTarget:W,mentionTargetRef:Y,search:q}}),P.active&&h.a.createElement($t,{value:P.content,onChange:P.onContentChange,mode:P.contentMode,placeholder:B,theme:i,comment:{}}),($||ee)&&h.a.createElement(ft,{theme:i,onClearAttachments:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return E(s)})),images:s.images.map((function(e){var t=Object(Xe.f)(e,C,c),n=Object(Xe.d)(t);return{id:t.fileId,mediaId:t.fileId,url:n||"",thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:C(e.thumbnail)}:void 0}})),files:s.files.map((function(e){var t=Object(Xe.f)(e,C,c),n=Object(Xe.d)(t);return{mediaId:e.uid,title:t.name||"",fileName:t.name||"",url:n||"",mimeType:t.mimeType||"",source:e.source,thumbnail:(null==e?void 0:e.thumbnail)?{type:"BlockImage",url:C(e.thumbnail)}:void 0}})),link:(null==s||null===(t=s.links)||void 0===t?void 0:t[0])?m({},s.links[0],{image:s.links[0].images[s.links[0].thumbnailIndex||0]}):void 0,community:o,isLoading:ee}),h.a.createElement(x.FlexBox,{hAlign:x.Alignment.center,className:"".concat(rn,"__footer"),orientation:x.Orientation.horizontal,wrap:!0},h.a.createElement(on,{comment:s,isAttachmentsLoading:Boolean(s.isAttachmentsLoading),onInsertLink:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return g(e,m({},s,{text:_}))})),onOpenFilePicker:(null==o?void 0:o.hasSecureStorage)?void 0:H,onQuickUpload:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return f(m({},s,{text:_}),o,e)})),legacyFallbackEditor:P}),h.a.createElement(x.Button,{emphasis:x.Emphasis.low,size:x.Size.s,onClick:K,disabled:D&&!$||u,className:"lumx-flex-box--margin-auto-left"},I("GLOBAL.PUBLISH"))))))):null})),sn=Object(We.a)(),un="comment",mn=function(e){var t,n=e.theme,a=void 0===n?x.Theme.light:n,i=e.comment,o=e.onReply,r=e.onLike,c=e.onTranslate,l=e.children,s=e.locale,u=e.canReport,m=e.onReport,d=e.onLikeListOpen,g=e.updateLegacyParentContent,f=e.className,b=i.uid,O=i.content,E=i.parent,v=i.authorProperties,L=i.createdAt,S=i.likes,k=i.liked,T=i.isLikeLoading,C=i.text,R=i.translatedText,w=i.mentionsDetails,_=i.markedAsRelevant,A=i.images,P=i.links,M=i.files,D=i.canMarkRelevant,B=i.canEdit,z=i.canHide,F=i.status,U=h.a.useState(!0),G=j()(U,2),H=G[0],K=G[1],V=Object(y.c)(),W=V.translateObject,Y=Boolean(l);return t=sn().diff(sn(L),"days")<2?sn.utc(L).local().fromNow():sn.utc(L).local().format("LL"),H?h.a.createElement(x.CommentBlock,{hasActions:!0,isOpen:Y,isRelevant:Boolean(_),avatarProps:{image:Object(me.b)(v),alt:v.fullName},name:v.fullName,date:t,theme:a,id:"".concat(un,"--").concat(i.uid),"data-created-at":sn.utc(L).unix(),className:N()(un,"".concat(un,"--").concat(i.status.toLowerCase()),f),actions:h.a.createElement(I.a,null,h.a.createElement(Ve,{disabled:i.status===qe.a.hide,likes:S,isLikeLoading:T,isLiked:Boolean(k),resourceId:b,resourceType:"comment",displayOptions:{variant:He.comment,buttonSize:x.Size.s,buttonColor:x.ColorPalette.dark,buttonClassName:i.status===qe.a.hide?void 0:"lumx-color-font-dark-L3",showButtonLabels:!0,buttonEmphasis:x.Emphasis.high},onLikeListOpen:d,likesList:i.likesList,theme:a,onLike:r,onReply:o,type:"BlockReactions"})),headerActions:h.a.createElement(jt,{comment:p({},i,{text:Object(Ye.a)(W(i.text)||"")}),status:F,canEdit:B,canHide:z,canMarkRelevant:D,markedAsRelevant:_,canReport:u,onEdit:function(){K(!1)},onReport:m,updateLegacyParentContent:g}),text:h.a.createElement(yt,{uid:b,content:O,parent:E,text:C,translatedText:R,onTranslate:c,files:M,links:P,images:A,mentionsDetails:w,locale:s,theme:a})},l):h.a.createElement(ln,{className:"lumx-spacing-margin-bottom-huge",onEditionSave:function(){K(!0)},contentId:i.content,parentId:i.parent,commentId:i.id})},dn=n(3322),pn=n.n(dn),gn=n(396),fn=n.n(gn),bn="comment-skeleton",On=function(e){var t=Object.assign({},e),n=t.className;return h.a.createElement(x.FlexBox,A()({className:N()(bn,n),orientation:x.Orientation.horizontal},t),h.a.createElement(x.SkeletonCircle,{className:"".concat(bn,"__avatar"),size:x.Size.m}),h.a.createElement("div",{className:"".concat(bn,"__content")},h.a.createElement(x.SkeletonRectangle,{variant:x.SkeletonRectangleVariant.rounded,style:{height:"60px",width:"100%"}}),h.a.createElement(x.SkeletonTypography,{typography:x.Typography.body2,style:{maxWidth:"152px",width:"100%"},className:"lumx-spacing-margin-top"})))},hn=function(e){var t=e.children;return h.a.createElement("h3",{className:N()("comments-section-title","lumx-spacing-margin-vertical-huge lumx-color-font-dark-L2 lumx-typography-overline")},t)},En="comments-skeleton",vn=function(e){var t=e.commentNumber,n=void 0===t?3:t,a=e.title,i=e.showLoadMoreButton,o=void 0===i||i,r=e.showTitle,c=void 0===r||r,l=M()(e,["commentNumber","title","showLoadMoreButton","showTitle"]),s=l.className;return h.a.createElement("div",A()({className:N()(En,s)},l),c&&(a?h.a.createElement(hn,null,a):h.a.createElement(x.SkeletonTypography,{className:"".concat(En,"__title lumx-spacing-margin-vertical-big"),typography:x.Typography.subtitle2,style:{maxWidth:"152px",width:"100%"}})),new Array(n).fill(null).map((function(e,t){return h.a.createElement(On,{key:t,className:"lumx-spacing-margin-bottom-big"})})),o&&h.a.createElement(x.SkeletonTypography,{className:"".concat(En,"__button"),typography:x.Typography.subtitle2,style:{maxWidth:"152px",width:"100%"}}))},yn=function(e){var t=e.direction,n=e.label,a=e.onClick,i=e.className,o=M()(e,["direction","label","onClick","className"]);return h.a.createElement(x.Link,A()({className:N()(i),style:{display:"inline-block"},onClick:a},o),h.a.createElement(x.FlexBox,{orientation:x.Orientation.horizontal,hAlign:x.Alignment.center},h.a.createElement(x.Icon,{icon:"down"===t?C.D:C.G,size:x.Size.xs,className:"lumx-spacing-margin-right-tiny"}),h.a.createElement("span",{className:"lumx-typography-body1"},n)))},Ln=function(e){var t=e.replies,n=void 0===t?[]:t,a=e.total,i=void 0===a?n.length:a,o=e.repliesPerPage,r=void 0===o?10:o,c=e.loadingMore,l=e.locale,s=e.onCommentReply,u=e.onCommentLike,m=e.onShowMore,d=e.onShowLess,p=e.onLikeListOpen,g=e.onTranslate,f=Object(y.c)(),b=f.translateKey,O=f.pluralize,E=pn()(n),v=E[0],L=E.slice(1),S=i-n.length,k=n.length<i,T=h.a.useState(!1),x=j()(T,2),I=x[0],C=x[1],R=S<r?S:r,w=I?L.length:R,_=O(b("FRONT.COMMENTS.REPLIES.DISPLAY_MORE"),w).replace("%NB%","".concat(w)),A=b("FRONT.COMMENTS.REPLIES.DISPLAY_LESS"),P=function(e){return function(){return u(e)}},M=function(e){return s?function(){return s(e)}:void 0};return 0===n.length?null:h.a.createElement(h.a.Fragment,null,h.a.createElement(mn,{locale:l,comment:v,onLike:P(v),onReply:M(v),onTranslate:g,onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return p(v)}))}),!I&&L.length>0&&L.map((function(e,t){return h.a.createElement(mn,{key:e.uid,className:N()({"comment-block--last":t===i-2}),locale:l,comment:e,onLike:P(e),onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return p(e)})),onReply:M(e),onTranslate:g})})),c&&Array(R>0?R:1).fill(h.a.createElement(vn,{key:fn()("comment-skeleton-"),className:"lumx-spacing-margin-top-big",showTitle:!1,commentNumber:c})),!c&&i>1&&h.a.createElement(yn,{direction:k||I?"down":"up",onClick:k||I?function(){m(k),C(!1)}:function(){d(),C(!0)},label:k||I?_:A,className:"".concat("comment-replies","__").concat(k||I?"toggle-display--more":"toggle-display--less")}))},Nn="comments",Sn=function(e){var t=e.title,n=e.comments,a=void 0===n?[]:n,i=e.more,o=e.loadingMore,r=e.community,c=e.locale,l=e.onLike,s=e.onReply,u=e.onTranslate,m=e.onDisplayMoreReplies,d=e.onDisplayLessReplies,p=e.onDisplayMoreComments,g=e.onLikeListOpen,f=e.contentId,b=e.updateLegacyParentContent,O=e.className,E=Object(y.c)(),v=E.translateKey;return h.a.createElement("div",{className:N()(Nn,O)},t&&h.a.createElement(hn,null,t),a.map((function(e){var t=e.comment,n=e.replies,a=e.loadingMore;return h.a.createElement(mn,{key:t.uid,locale:c,comment:t,onLike:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return l(t)})),onLikeListOpen:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return g(t)})),onReply:s?function(){return s(t)}:void 0,onTranslate:u,updateLegacyParentContent:b},n&&n.length>0&&h.a.createElement(Ln,{locale:c,replies:n,total:t.answersNumber,onCommentLike:l,onCommentReply:s,onShowMore:function(e){return m(t,e)},onShowLess:function(){return d(t.uid)},onTranslate:u,onLikeListOpen:g,loadingMore:a}),h.a.createElement(ln,{community:r,contentId:f,parentId:t.uid,isReply:!0,className:"lumx-spacing-margin-top-big",updateLegacyParentContent:b}))})),o&&h.a.createElement(vn,{className:"lumx-spacing-margin-top-big",showTitle:!1,commentNumber:o}),!o&&i&&h.a.createElement(yn,{onClick:p,direction:"down",label:v("FRONT.COMMENTS.DISPLAY_MORE"),className:"".concat(Nn,"__toggle-display--more")}))};t.default=function(e){var t,n=e.isLoading,a=e.contentId,i=e.canComment,o=e.comments,r=e.community,c=e.locale,l=e.relevantComment,s=e.shouldDisplayTitle,u=e.onLike,m=e.onReply,d=e.onDisplayMoreReplies,p=e.onDisplayLessReplies,g=e.onDisplayMoreComments,f=e.onLikeListOpen,b=e.onTranslate,O=e.updateLegacyParentContent,E=e.displayNumber,L=e.totalComments,N=void 0===L?0:L,S=e.more,k=Object(y.c)(),T=k.translateKey,j=v()(o,(function(e){var t=e.comment;return!t.markedAsRelevant})),x=i?m:void 0;return E?t=E>N?E:N:N>0&&(t=N),h.a.createElement(h.a.Fragment,null,s&&h.a.createElement("h3",{className:"lumx-typography-subtitle2 lumx-spacing-margin-top-big lumx-spacing-margin-huge"},T("WIDGET_TYPE_COMMENTS")),i&&h.a.createElement(ln,{community:r,className:"lumx-spacing-margin-horizontal-huge lumx-spacing-margin-top-huge",contentId:a,updateLegacyParentContent:O}),n?h.a.createElement("div",{className:"lumx-spacing-margin-huge"},h.a.createElement(vn,{commentNumber:t})):h.a.createElement(h.a.Fragment,null,l&&h.a.createElement(Sn,{title:T("FRONT.WIDGET.WIDGET_COMMENTS.RELEVANT_COMMENT.TITLE"),community:r,locale:c,comments:[l],onLike:u,onReply:x,onTranslate:b,onDisplayMoreComments:g,onDisplayMoreReplies:function(e,t){d(e.uid,t),x&&x(e,!1)},onDisplayLessReplies:function(e){p(e)},onLikeListOpen:f,contentId:a,updateLegacyParentContent:O,className:"lumx-spacing-padding-bottom-none"}),(null==j?void 0:j.length)>0&&h.a.createElement(Sn,{locale:c,title:T("GLOBAL.MOST_RECENT"),comments:j,community:r,more:S,onLike:u,onReply:x,onTranslate:b,onDisplayMoreComments:g,onDisplayMoreReplies:function(e,t){d(e.uid,t),x&&x(e,!1)},onDisplayLessReplies:function(e){p(e)},contentId:a,onLikeListOpen:f,updateLegacyParentContent:O})))}}}]);
//# sourceMappingURL=widget-post-list-block-post.js.map